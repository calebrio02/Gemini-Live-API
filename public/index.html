<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gemini Voice Chat</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <div class="container">
        <header>
            <h1>‚ú® Gemini Voice Chat</h1>
            <p class="subtitle">Real-time voice conversations with AI</p>
        </header>

        <main>
            <!-- Status indicator -->
            <div class="status-bar">
                <div class="status-dot" id="statusDot"></div>
                <span id="statusText">Ready</span>
            </div>

            <!-- Voice visualization -->
            <div class="visualizer-container">
                <div class="visualizer" id="visualizer">
                    <div class="wave"></div>
                    <div class="wave"></div>
                    <div class="wave"></div>
                    <div class="wave"></div>
                    <div class="wave"></div>
                </div>
                <div class="ai-avatar" id="aiAvatar">
                    <span>ü§ñ</span>
                </div>
            </div>

            <!-- Main control button -->
            <div class="controls-row">
                <button class="icon-button" id="cameraStartBtn" title="Toggle Camera">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round" style="width: 24px; height: 24px;">
                        <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z">
                        </path>
                        <circle cx="12" cy="13" r="4"></circle>
                    </svg>
                </button>

                <button class="icon-button" id="switchCameraBtn" title="Switch Camera" style="display: none;">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round" style="width: 24px; height: 24px;">
                        <path d="M20 5H9l-7 7 7 7h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2z"></path>
                        <path d="M14 8l-2 2 2 2"></path>
                    </svg>
                </button>

                <button class="talk-button" id="talkButton">
                    <svg class="mic-icon" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z" />
                        <path
                            d="M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z" />
                    </svg>
                    <span id="buttonText">Start Conversation</span>
                </button>
            </div>

            <!-- Video Preview -->
            <div class="camera-preview" id="cameraPreview">
                <video id="localVideo" autoplay playsinline muted></video>
            </div>

            <!-- Hidden Canvas for frame extraction -->
            <canvas id="videoCanvas" style="display: none;"></canvas>

            <!-- Transcript (optional) -->
            <div class="transcript" id="transcript">
                <div class="transcript-content" id="transcriptContent"></div>
            </div>
        </main>

        <!-- Settings panel -->
        <aside class="settings-panel" id="settingsPanel">
            <button class="settings-toggle" id="settingsToggle">
                ‚öôÔ∏è Settings
            </button>

            <div class="settings-content" id="settingsContent">
                <div class="setting-group">
                    <label for="voiceSelect">Voice</label>
                    <select id="voiceSelect"></select>
                </div>

                <div class="setting-group">
                    <label for="systemPrompt">System Prompt</label>
                    <textarea id="systemPrompt" rows="4" placeholder="You are a helpful assistant..."></textarea>
                </div>

                <p class="settings-hint">Changes apply on next conversation start</p>
            </div>
        </aside>
    </div>

    <script src="js/app.js?v=2"></script>
</body>

</html>